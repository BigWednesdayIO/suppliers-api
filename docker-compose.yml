postcodesapi:
  image: eu.gcr.io/first-footing-108508/postcodes-api:dev
  environment:
    - GCLOUD_PROJECT_ID=first-footing-108508
    - GCLOUD_KEY=ew0KICJwcml2YXRlX2tleV9pZCI6ICIzZGMzYzdiNmI0OWYyZTc1MDlmNTliN2JhNzkzODlhY2UzOWM5Y2M4IiwNCiAicHJpdmF0ZV9rZXkiOiAiLS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tXG5NSUlFdlFJQkFEQU5CZ2txaGtpRzl3MEJBUUVGQUFTQ0JLY3dnZ1NqQWdFQUFvSUJBUUM0Q1VaeVVpV0FyRnpzXG5waVh1NlRIZTlldGxpNklXY3FFUm4rYzhyS2tBQTVVWUxZYWxwazl5L0ovSWZHN3VnUFhrcm1MUHJmMTFGeVowXG5NTnlOdHl4WEV2STVSS3EyS1gwV05hWWdBM1krdmlQcHJUNnZTY0x5SnJubkhCN2l4cHFkZTRiekNxOWhqK3ZLXG56Rzl2bXg0amVCdERsUGNEUitNWXV0ZzBOVzBqZHdITEZxRTZvYXB2cnRoTklJc2UvYmtqaWl3a29oSzFVRmpaXG45dnh6Vmg2dEFzVS9wZjgwNnR4bllMb1Rlc20yUGZhZTU0ejhDOFRxM1lLeFBzVkJpc3ozSkJ1Um83M0kzcWx1XG5zTW9PTDJ1a1dlLzJYQ01qTFhyNkFpbllGK3BWZVhFZ3A2dk1oRnRCUkE5VWkwckpKTkpDMnM0b3RRWkdCSW82XG5UYW4xNVJ4YkFnTUJBQUVDZ2dFQWQxSDBMY3phNmRsWENrd1REaHA5cmh4dHVkSFZqbzVWcGZLeDN5SG5GTTQ5XG56WVkrNVltMXUwelZZQXhsZEJlQzFmakdzZllSL2VlN2s5dldNNy9PYk1vbzZENkFIRWs4QTdsVzh5eXJiclNpXG4zaS9vRTRoVWIrSHg2RWpRTWFJb3Z2QkhKNjhHMU0rV1JrOVQ5TjF5cGZhS1hyL25nMllKZEpBMysybWtVRGdPXG5pMmxYTFRhekptWGxLOVJaWWY3dlNFUWM5NVpUa3lTbjNLWlpGRFVpL3FENzZNVE9QMUVWYWFtWEFzR2Q2b25JXG50Q2EvWDJQRXNWczZnRHJCTUNrNGlsdUNjalArNDlCWlMxVHlXQmlaZ0NRMWp1TS9SWlJsUXdNL25mTTUzdUdQXG5EYXZiU2QvVkpyb1dzK3l1VGxET2RxYksxeDh0VFZvTktNSlNlZStmZVFLQmdRRHhrNEVaSmwzNVY0MDIwY3hSXG5IWDNZU2djdmcyazlzYWFIR3F5MGR0T05VM1IyQXdqRnd5RXZaT0pTdXFHekVEVXFwRjRldE1id2RRaG13UDZOXG5NTWlDZ0NlbTdJb0lhVWZZUTQ4cU4wa3BHNFQ1ZW0zeUIvY3EzZXZFN3gvZXhYMXdPR1VSSmhEbEFJVUY2VWRtXG5KVURPNXVCbTVUQWs5YmltZ0pZdmJBcnNsd0tCZ1FEREJrV1NwTEVabkt1NHo3dS80WWV0dzUxNSs5STlvRTZSXG5UZGVCRjVjWlhnT3VlT3lXekZDRXcveUVVd1NxK09uVDdQOFM4UWRwblpwSXB0NEFCMzJHaW1qcVZjK3pBREpyXG5SMlgxckxJdkZQdVBQaEdrREc5dzZ4akNGUnVMWGJGWU5JOFFyWUZkOVNDaFNVUFJ4c3czYXJnanZQMjNrNThiXG5hMzVuZmhYUzNRS0JnSGRTcDNxM3M4VThWSmtXU2Jock84VEExQW5JL0F1b0d4d3l0Y214dzg3VHdQdWxoZ2pBXG4yRHhqdFZLdHNyOFNxMkF6cmZXMnoyam9OYzBqV05oK2x4dTJsMTloQ05FY3g0cnYyK0E3VEp6TVpnTWdVUHd5XG5xUWg0YzBOajViY1FqMlFGeHc0UVlsbnF4c25qcnd1cUxQZkZuR1BXb3RBdXV4VXJBSVBOOXh0akFvR0JBTGxJXG41Q0NHUjV2RnRZQklIR0FZclFieHFsT1NaQlFZa1l5TElBdU5sZ2lMd1lPcGIxMTFqNm9UYVgxdVFpa05nMW5NXG4rQ25PeFBRYXY5SDJkMFFmMmFwUkpZdzlLcTh0cUxremhETDhkKzB6U2l5MUU1MkFFd0I4MjNESkRQcERjWklUXG5uVGlESHoxYy9qczltQ2xkYmZmWWRFbS83R3pVMjN6NWk0Wlh5L1FoQW9HQU84SnlmWDBIUzdwK1Jtai9JMkNxXG53cnJzQWZRZHJDeEYzUy9mZ2hJWVBxVjlkNkxQWVhmdHBWZEVkL05kdHAvSHZBOUU2emY2Z2t4VStRY2FCNmxqXG5uUDJ2UnA5NXY2ZnVKcW9VdUQyN05OU2pLWXpoczBwQ2g0bjBFOS9WeGFIencrSklYMkZlejBKV0tnbTZFaUE3XG53Ym0zUFgrNTBqLzJHUElWaXNXSXhMMD1cbi0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS1cbiIsDQogImNsaWVudF9lbWFpbCI6ICI5OTg0OTgxOTYwMDQtbzZzZmozdTA0cTBzNjg4aDAxbG5tY2l0b3UwMWowZjFAZGV2ZWxvcGVyLmdzZXJ2aWNlYWNjb3VudC5jb20iLA0KICJjbGllbnRfaWQiOiAiOTk4NDk4MTk2MDA0LW82c2ZqM3UwNHEwczY4OGgwMWxubWNpdG91MDFqMGYxLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tIiwNCiAidHlwZSI6ICJzZXJ2aWNlX2FjY291bnQiDQp9
  ports:
    - '8080'

gclouddatastore:
  image: risaacson/gcd-local:v1beta2-rev1-3.0.0
  environment:
    - PROJ_ID=suppliers
    - CONSISTENCY=1.0
  ports:
    - '8080'

api:
  build: .
  ports:
    - '8080'
  links:
    - gclouddatastore
    - postcodesapi
  environment:
    - POSTCODES_API_SVC_HOST=postcodesapi
    - POSTCODES_API_SVC_PORT=8080
    - DATASTORE_HOST=http://gclouddatastore:8080
    - GCLOUD_PROJECT_ID=suppliers
    - GCLOUD_KEY=ew0KICAidHlwZSI6ICJzZXJ2aWNlX2FjY291bnQiLA0KICAicHJpdmF0ZV9rZXlfaWQiOiAiNmVmZDhhNGNlNzk2M2NiYjk2ODM4MmIzZjQ1ODBhZGI5NTNhYmRhZSIsDQogICJwcml2YXRlX2tleSI6ICItLS0tLUJFR0lOIFBSSVZBVEUgS0VZLS0tLS1cbk1JSUV2UUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktjd2dnU2pBZ0VBQW9JQkFRQzZHK2JFeVk0OTFBYkVcbi9jckpUK21iYVVVTXJDcGhzUUI3dHZRSTFSRThuY293UFVqTDVVK0NXSlJKVWxwOW5hTlRVM0F5UmFwc0kyVzdcbmliRmg1bVVNT0JwcysyTnczcnY2eFN5QUcrK0NtQ3ZLYk5SeXJrNFpFQms2N0ZTN1FZMFVpeEFaWnVwaUdsd3JcblV2ZEZpNGJHWVcrK1RObjFwTW9zYkRUOEhTT0FtbFI0dEExZTFnRlYvZ24zbVJLSXhEZmNvaTFZaEhlRzNzckdcblFZUVV6N1M3MHhNUG02RXpnZXgvdzZPSktiLzdyVjlIdjhraXJYeG5CWDNLL2cweGFjYjNxaS9DVDI4ZDhLZHdcbjJOUFppVGVTMUNVcWdFM2NKSnM1U3FKckFPYzRwNVR0Q3lXTFZTaXRZRmtPMG5PNjFEWlNFcTF3YkJ2MkFtZzlcblpCV0xzNW16QWdNQkFBRUNnZ0VBZi8vRW5iL0tOcmZtMkFGOVFTdlhEVzQvY1ZIUDdGU2ljblFJTHpMcm9mY2NcbklrVmtGZWZtNFUwdTM2Ym1XZExiaSttdEZzWlhTZnltY1c5b01sOFZUR3doc0tiTlk4bXRHL0lVZ3gremdPeExcbjRmTXJ3cHdqVnBWOTVNcTZFL2dub2VOcTlTMlZNbGZTNEhFMVkvMXNlbkIxUERyN0JUbUxXellvMHVUdmovaGxcbkJvMC80OWR6dk9MbDNaT2FjeCtGanpXemRSVzZVU1Q3M29kRFdPQzdKaVNVSzhBWFpydmx2OWViQ0JjWFJyZ21cbldRZkdyM3hRblE2NnIxeit5NlcvUTdQd0VZS0dxc0lROE16QmhEQnNGaVhtQStGTkNNSlJ6QTI2SWV6NDRXQ3Ncbmc2MkR5d0xFOTFVZVFiZVYyS2twYlU1LzFRWWRWMFJBMnozZ2swRE9BUUtCZ1FEL1BTMTBoRHR6VGJkcVY3Zytcbk4yMklYVXg0cTNQcmhKeTlxbTJLMElya250dFNrQnVzbW92dm9DVXVUaGZPTWdmSlBUbm9nVmFkSXl3Zy9xci9cbjM1U1UxdzR2dFBQWjl0dXZvZFRWOVRJT1R3Vjc1NHZNYWRiVVFtL1U3MTg5M3hXNUMva2ZqZ2treEZCelZOcGpcbmZhc0FsazE2aSt5aE9abHBodktmcHNjSE13S0JnUUM2cWZVVm80YjJkMGprSGdCVzRBVTV2cTFrNjFub1NRR21cbmxaR0RKMnFQSDI4ckdlL0hmRisvNWp2UGdOTmNCT0JkQmVrVC9Ta2QrM0JGQXZ4NDJrT0xWV0I5dm1XejNFRmZcblY0ZnRCNWwyY2x0Z2MzTnpJam5RN0pEcElnazN4SzFmQ21yWDIyNnBJTDV4a0VWSStlak5wYnZzWGR2ZlRUVDFcblQybDU0dDhqZ1FLQmdFekdHU01nRjBYU2phWW1KcHhJVGVFanR6bmcwS2g2SmkrQzBScGRLam9rY25JK09LVE5cbmcrUWJOclBiOTVzbFAyUlB6MWhaZHpVaS9FWWNkRkVzN21OcTRMQ0c3SWFXazNRYjZJcEhDN3gwRm9Fem44Qm5cbjRaL05NQmhMdkVrL0RpaXdLa3BNamdHS0wyelJqRE02L0xIYmhBaWxpQkxpNFh0MWhRdHl2aEV6QW9HQkFKZ3Vcbk04ZWVlRXU3MkV0U1FraVJmdkVqQ1U0N3FpTDhVa0l6c2x4UTZFa2pBWWtNTGpaZXFkbFRwUE41UGRmSmlmbU1cbjlnYjc0R2UzTkVLdk9wSjByNWlLMUkzdmlnN214TTBzR1g4Zk1QZ21KMlVzK3JTazlLbm1GQVpkWDFKK0lESlpcbjFkMkI0bWcwYjg4NkphSm5UR3RNY1RjMUZpcXBVVUdscW9KYWVqMEJBb0dBWVZIblpBSEtkdlVNTzB4NGswNVRcbloxaHhqcGQ4K01Dc3NtZERqTzVZK2VBeUYxbWxQMzJxQlZrMytFUUZ1ekJNS2ZBWTZOUjhFc0dRUk9RSndRQ3hcbmpRSm0rM2t0QjM4WmtQNENlZ0dHcjFpZnQ3cCtIQnJkNldaODFlTGdsczJmTGdpaWY2c2RsNWttUkY1M1g4U1hcbkRURnRsYk16V3ZnUkVKeW16QTZJRHVVPVxuLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLVxuIiwNCiAgImNsaWVudF9lbWFpbCI6ICJhY2NvdW50LTJAZmlyc3QtZm9vdGluZy0xMDg1MDguaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLA0KICAiY2xpZW50X2lkIjogIjExNzcyNTcwNjE4NzM5OTE4MTgyMSIsDQogICJhdXRoX3VyaSI6ICJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20vby9vYXV0aDIvYXV0aCIsDQogICJ0b2tlbl91cmkiOiAiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL28vb2F1dGgyL3Rva2VuIiwNCiAgImF1dGhfcHJvdmlkZXJfeDUwOV9jZXJ0X3VybCI6ICJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9vYXV0aDIvdjEvY2VydHMiLA0KICAiY2xpZW50X3g1MDlfY2VydF91cmwiOiAiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vcm9ib3QvdjEvbWV0YWRhdGEveDUwOS9hY2NvdW50LTIlNDBmaXJzdC1mb290aW5nLTEwODUwOC5pYW0uZ3NlcnZpY2VhY2NvdW50LmNvbSINCn0

dev:
  build: .
  ports:
    - '8080'
  volumes:
    - .:/src
  links:
    - gclouddatastore
    - postcodesapi
  environment:
    - POSTCODES_API_SVC_HOST=postcodesapi
    - POSTCODES_API_SVC_PORT=8080
    - DATASTORE_HOST=http://gclouddatastore:8080
    - GCLOUD_PROJECT_ID=suppliers
    - GCLOUD_KEY=ew0KICAidHlwZSI6ICJzZXJ2aWNlX2FjY291bnQiLA0KICAicHJpdmF0ZV9rZXlfaWQiOiAiNmVmZDhhNGNlNzk2M2NiYjk2ODM4MmIzZjQ1ODBhZGI5NTNhYmRhZSIsDQogICJwcml2YXRlX2tleSI6ICItLS0tLUJFR0lOIFBSSVZBVEUgS0VZLS0tLS1cbk1JSUV2UUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktjd2dnU2pBZ0VBQW9JQkFRQzZHK2JFeVk0OTFBYkVcbi9jckpUK21iYVVVTXJDcGhzUUI3dHZRSTFSRThuY293UFVqTDVVK0NXSlJKVWxwOW5hTlRVM0F5UmFwc0kyVzdcbmliRmg1bVVNT0JwcysyTnczcnY2eFN5QUcrK0NtQ3ZLYk5SeXJrNFpFQms2N0ZTN1FZMFVpeEFaWnVwaUdsd3JcblV2ZEZpNGJHWVcrK1RObjFwTW9zYkRUOEhTT0FtbFI0dEExZTFnRlYvZ24zbVJLSXhEZmNvaTFZaEhlRzNzckdcblFZUVV6N1M3MHhNUG02RXpnZXgvdzZPSktiLzdyVjlIdjhraXJYeG5CWDNLL2cweGFjYjNxaS9DVDI4ZDhLZHdcbjJOUFppVGVTMUNVcWdFM2NKSnM1U3FKckFPYzRwNVR0Q3lXTFZTaXRZRmtPMG5PNjFEWlNFcTF3YkJ2MkFtZzlcblpCV0xzNW16QWdNQkFBRUNnZ0VBZi8vRW5iL0tOcmZtMkFGOVFTdlhEVzQvY1ZIUDdGU2ljblFJTHpMcm9mY2NcbklrVmtGZWZtNFUwdTM2Ym1XZExiaSttdEZzWlhTZnltY1c5b01sOFZUR3doc0tiTlk4bXRHL0lVZ3gremdPeExcbjRmTXJ3cHdqVnBWOTVNcTZFL2dub2VOcTlTMlZNbGZTNEhFMVkvMXNlbkIxUERyN0JUbUxXellvMHVUdmovaGxcbkJvMC80OWR6dk9MbDNaT2FjeCtGanpXemRSVzZVU1Q3M29kRFdPQzdKaVNVSzhBWFpydmx2OWViQ0JjWFJyZ21cbldRZkdyM3hRblE2NnIxeit5NlcvUTdQd0VZS0dxc0lROE16QmhEQnNGaVhtQStGTkNNSlJ6QTI2SWV6NDRXQ3Ncbmc2MkR5d0xFOTFVZVFiZVYyS2twYlU1LzFRWWRWMFJBMnozZ2swRE9BUUtCZ1FEL1BTMTBoRHR6VGJkcVY3Zytcbk4yMklYVXg0cTNQcmhKeTlxbTJLMElya250dFNrQnVzbW92dm9DVXVUaGZPTWdmSlBUbm9nVmFkSXl3Zy9xci9cbjM1U1UxdzR2dFBQWjl0dXZvZFRWOVRJT1R3Vjc1NHZNYWRiVVFtL1U3MTg5M3hXNUMva2ZqZ2treEZCelZOcGpcbmZhc0FsazE2aSt5aE9abHBodktmcHNjSE13S0JnUUM2cWZVVm80YjJkMGprSGdCVzRBVTV2cTFrNjFub1NRR21cbmxaR0RKMnFQSDI4ckdlL0hmRisvNWp2UGdOTmNCT0JkQmVrVC9Ta2QrM0JGQXZ4NDJrT0xWV0I5dm1XejNFRmZcblY0ZnRCNWwyY2x0Z2MzTnpJam5RN0pEcElnazN4SzFmQ21yWDIyNnBJTDV4a0VWSStlak5wYnZzWGR2ZlRUVDFcblQybDU0dDhqZ1FLQmdFekdHU01nRjBYU2phWW1KcHhJVGVFanR6bmcwS2g2SmkrQzBScGRLam9rY25JK09LVE5cbmcrUWJOclBiOTVzbFAyUlB6MWhaZHpVaS9FWWNkRkVzN21OcTRMQ0c3SWFXazNRYjZJcEhDN3gwRm9Fem44Qm5cbjRaL05NQmhMdkVrL0RpaXdLa3BNamdHS0wyelJqRE02L0xIYmhBaWxpQkxpNFh0MWhRdHl2aEV6QW9HQkFKZ3Vcbk04ZWVlRXU3MkV0U1FraVJmdkVqQ1U0N3FpTDhVa0l6c2x4UTZFa2pBWWtNTGpaZXFkbFRwUE41UGRmSmlmbU1cbjlnYjc0R2UzTkVLdk9wSjByNWlLMUkzdmlnN214TTBzR1g4Zk1QZ21KMlVzK3JTazlLbm1GQVpkWDFKK0lESlpcbjFkMkI0bWcwYjg4NkphSm5UR3RNY1RjMUZpcXBVVUdscW9KYWVqMEJBb0dBWVZIblpBSEtkdlVNTzB4NGswNVRcbloxaHhqcGQ4K01Dc3NtZERqTzVZK2VBeUYxbWxQMzJxQlZrMytFUUZ1ekJNS2ZBWTZOUjhFc0dRUk9RSndRQ3hcbmpRSm0rM2t0QjM4WmtQNENlZ0dHcjFpZnQ3cCtIQnJkNldaODFlTGdsczJmTGdpaWY2c2RsNWttUkY1M1g4U1hcbkRURnRsYk16V3ZnUkVKeW16QTZJRHVVPVxuLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLVxuIiwNCiAgImNsaWVudF9lbWFpbCI6ICJhY2NvdW50LTJAZmlyc3QtZm9vdGluZy0xMDg1MDguaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLA0KICAiY2xpZW50X2lkIjogIjExNzcyNTcwNjE4NzM5OTE4MTgyMSIsDQogICJhdXRoX3VyaSI6ICJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20vby9vYXV0aDIvYXV0aCIsDQogICJ0b2tlbl91cmkiOiAiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL28vb2F1dGgyL3Rva2VuIiwNCiAgImF1dGhfcHJvdmlkZXJfeDUwOV9jZXJ0X3VybCI6ICJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9vYXV0aDIvdjEvY2VydHMiLA0KICAiY2xpZW50X3g1MDlfY2VydF91cmwiOiAiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vcm9ib3QvdjEvbWV0YWRhdGEveDUwOS9hY2NvdW50LTIlNDBmaXJzdC1mb290aW5nLTEwODUwOC5pYW0uZ3NlcnZpY2VhY2NvdW50LmNvbSINCn0
  command: bash -c "npm install && npm run watch"
